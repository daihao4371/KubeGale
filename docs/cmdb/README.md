# CMDB 资产管理模块设计文档

## 1. 模块概述

CMDB（Configuration Management Database）资产管理模块用于管理和维护 IT 基础设施资产信息，包括项目、主机和批量操作等功能。

## 2. 功能模块

### 2.1 项目管理

#### 页面布局
- 顶部：搜索栏（支持按项目名称、描述等字段搜索）
- 主体：项目列表表格
- 底部：分页控件

#### 功能特性
- 项目列表展示
  - 项目名称
  - 项目描述
  - 创建时间
  - 更新时间
  - 操作列（编辑、删除）
- 新建项目
  - 项目名称（必填）
  - 项目描述
  - 项目负责人
- 编辑项目
- 删除项目（支持批量删除）
- 项目详情查看

#### API 接口
- GET /cmdb/projects - 获取项目列表
- GET /cmdb/projectsById - 获取项目详情
- POST /cmdb/projects - 创建项目
- PUT /cmdb/projects - 更新项目
- DELETE /cmdb/projects - 删除项目
- DELETE /cmdb/projectsByIds - 批量删除项目

### 2.2 主机管理

#### 页面布局
- 顶部：搜索栏（支持按主机名、IP、状态等字段搜索）
- 主体：主机列表表格
- 底部：分页控件

#### 功能特性
- 主机列表展示
  - 主机名称
  - IP 地址
  - 操作系统
  - 状态
  - 所属项目
  - 操作列（编辑、删除、SSH认证）
- 新建主机
  - 主机名称
  - IP 地址
  - 操作系统
  - 认证信息
  - 所属项目
- 编辑主机
- 删除主机（支持批量删除）
- SSH 认证
- 主机导入（支持批量导入）
- 主机详情查看

#### API 接口
- GET /cmdb/hosts - 获取主机列表
- GET /cmdb/hostsById - 获取主机详情
- POST /cmdb/hosts - 创建主机
- PUT /cmdb/hosts - 更新主机
- DELETE /cmdb/hosts - 删除主机
- DELETE /cmdb/hostsByIds - 批量删除主机
- POST /cmdb/hosts/authentication - SSH认证主机
- POST /cmdb/hosts/import - 导入主机

### 2.3 批量操作

#### 页面布局
- 顶部：操作类型选择
- 主体：批量操作表单
- 底部：执行记录列表

#### 功能特性
- 批量操作类型
  - 批量命令执行
  - 批量文件传输
  - 批量配置更新
- 操作目标选择
  - 按项目选择
  - 按主机选择
  - 自定义主机列表
- 操作参数配置
  - 命令内容
  - 执行超时时间
  - 并发数设置
- 执行记录查看
  - 操作类型
  - 执行时间
  - 执行状态
  - 执行结果
  - 错误信息

#### API 接口
- POST /cmdb/batchOperations/execute - 执行批量操作
- GET /cmdb/batchOperations/execLogs - 获取执行记录

## 3. 技术实现

### 3.1 前端技术栈
- Vue.js
- Element UI
- Axios
- Vuex

### 3.2 后端技术栈
- Go
- Gin
- GORM
- MySQL

## 4. 权限控制

### 4.1 角色权限
- 管理员：所有操作权限
- 运维人员：主机管理和批量操作权限
- 普通用户：只读权限

### 4.2 操作审计
- 记录所有关键操作
- 包含操作人、操作时间、操作类型等信息

## 5. 注意事项

1. 数据安全
   - 敏感信息加密存储
   - 操作日志完整记录
   - 定期数据备份

2. 性能优化
   - 分页加载
   - 数据缓存
   - 异步处理

3. 用户体验
   - 操作反馈及时
   - 错误提示清晰
   - 界面简洁直观

## 6. 后续规划

1. 功能扩展
   - 资产自动发现
   - 配置变更追踪
   - 资产关系图谱

2. 性能提升
   - 分布式部署
   - 数据分片
   - 缓存优化

3. 安全加强
   - 双因素认证
   - 操作审批流程
   - 数据加密传输

CMDB资产管理
├── 项目管理
├── 主机管理
└── 批量操作 